# 管理后台使用指南

## 访问管理后台

- 地址：http://<服务器IP或域名>:8080

---

## 一、配置向导

首次登录后自动进入配置向导，共5个步骤。

### Step 1: OTA 配置

配置OTA服务器信息，用于配置下发给小智硬件的 websocket和mqtt地址。

<!-- 截图位置：OTA配置界面 -->
> 图：OTA配置向导界面

| 配置项 | 说明 |
|-------|------|
| MQTT Broker | MQTT服务器地址 |
| MQTT Port | MQTT端口（默认1883） |
| UDP Port | UDP端口 |
| ... | ... |

**测试连通性**：点击「测试当前配置」验证MQTT/UDP连接。

---

### Step 2: VAD 配置

选择语音活动检测引擎：

<!-- 截图位置：VAD配置界面 -->
> 图：VAD配置向导界面

| 引擎 | 说明 | 推荐场景 |
|-----|------|---------|
| Silero VAD | 高精度 | 生产环境 |
| WebRTC VAD | 轻量级 | 资源受限 |
| ten_vad | 本地C++版本 | 高性能需求 |

---

### Step 3: ASR 配置

选择语音识别引擎：

<!-- 截图位置：ASR配置界面 -->
> 图：ASR配置向导界面

| 引擎 | 说明 |
|-----|------|
| FunASR | 本地识别，需下载模型 |
| Doubao ASR | 云端API |

---

### Step 4: LLM 配置

选择大语言模型：

<!-- 截图位置：LLM配置界面 -->
> 图：LLM配置向导界面

| 引擎 | 说明 |
|-----|------|
| OpenAI兼容 | 支持各类API |
| Ollama | 本地部署 |
| Doubao | 字节豆包 |

---

### Step 5: TTS 配置

选择语音合成引擎：

<!-- 截图位置：TTS配置界面 -->
> 图：TTS配置向导界面

| 引擎 | 说明 |
|-----|------|
| Doubao TTS | 云端API |
| EdgeTTS | 微软免费TTS |
| CosyVoice | 本地高质量 |

---

## 二、配置测试

### 测试单个配置

在各配置页面，点击配置项右侧的「测试」按钮：

<!-- 截图位置：单个配置测试按钮 -->
> 图：配置测试按钮

测试结果说明：

| 字段 | 说明 |
|-----|------|
| 状态 | 成功/失败 |
| 首包延迟 | 毫秒级响应时间 |
| 消息 | 错误详情（如失败） |

<!-- 截图位置：测试结果弹窗 -->
> 图：配置测试结果弹窗

### 批量测试

在配置管理页面，点击「测试全部」批量测试所有配置：

<!-- 截图位置：批量测试界面 -->
> 图：批量测试界面

### 测试类型支持

| 测试类型 | 说明 |
|---------|------|
| VAD | 语音活动检测连通性与响应时间 |
| ASR | 语音识别连通性与首包延迟 |
| LLM | 大模型推理连通性与首包延迟 |
| TTS | 语音合成连通性与首包延迟 |
| OTA | MQTT/UDP 连通性测试 |

---

## 三、延迟监控

查看系统各模块的首包延迟统计：

<!-- 截图位置：延迟监控界面 -->
> 图：延迟监控界面

### 延迟优化建议

| 模块 | 优化方向 |
|-----|---------|
| ASR | 使用本地模型或就近的API节点 |
| LLM | 选择更小的模型或使用流式输出 |
| TTS | 使用边缘TTS或本地模型 |

---

## 四、配置管理

### 编辑配置

进入「配置管理」→ 对应模块 → 编辑配置项

<!-- 截图位置：配置管理界面 -->
> 图：配置管理界面

### 启用/禁用配置

通过开关控制配置是否生效。

### 设置默认配置

每个模块可设置一个默认配置，设备未指定时使用默认。

---

## 常见问题

### Q1: 配置测试失败？

1. 检查网络连接
2. 验证API密钥是否正确
3. 查看主程序控制台日志

### Q2: 如何恢复默认配置？

删除 `config/` 目录下的配置文件，重启服务。

### Q3: 配置修改后需要重启吗？

大部分配置修改后实时生效，部分模块配置可能需要重启设备连接。
